---
title: "2. 多组分系统"
date: 2021-06-14T14:19:28+10:00
draft: false
weight: 20
---

如今，我们很少处理独立的解决方案。 甚至我们认为独立的解决方案也由多个较小的组件组​​成。 例如，物理服务器由多个较小的部分组成，例如电源和磁盘。 要计算服务器可用性，我们需要考虑每个组件的可用性及其对整体可用性的影响。

## 系统组件系列

系列是串行连接。想想 Web 服务器 -> 应用程序服务器 -> 数据库服务器。

具有多个串联子组件的整个系统的可用性按以下公式计算：

![可用性 整体系统](1.7.2-fig-1.png)

让我们考虑一个例子，在这种情况下，我们有三个相互串联的独立组件，每个组件的可用性为 99.9%。整个系统的可用性 = `99.9 * 99.9 * 99.9 = ~99.7 %`

![系统总流程](1.7.2-fig-2.png)

简而言之，我们可以看到，对于串联组件，整体可用性会降低。

## 并联系统组件

具有多个并行子组件的整个系统的可用性按以下公式计算：

![subcomponents](1.7.2-fig-3.png)

`1 - Availability of Component i` 给我们提供了组件的不可用性。

让我们考虑一个例子，在这种情况下，我们有三个相互并行的独立组件，每个组件都有 99.9% 的可用性。

![组件对系统可用性的贡献](1.7.2-fig-4.png)

整个系统的可用性：

![可用性 整体系统方程](1.7.2-fig-5.png)

## 多组分

让我们考虑一个更实用的系统，它同时具有串行和并行组件。对于本示例，我们以具有 4 个 Web 服务器、2 个应用程序服务器和 1 个数据库服务器的三层应用程序为例。让我们考虑一下所有这些的可用性为 99.9%，看看整体可用性是多少。

![多组件可用性](1.7.2-fig-5.png)

首先，我们需要先计算并行组件的整体可用性。使用上面的公式，我们看到应用服务器的整体可用性为99.99%，Web服务器为99.9999%。

接下来，我们需要计算串联组件的整体可用性。应用上述公式，我们得到了 ~99.89% 的整体可用性。

这就是我们避免与其他系统串联的单点故障的原因，因为此类组件会降低整体可用性。