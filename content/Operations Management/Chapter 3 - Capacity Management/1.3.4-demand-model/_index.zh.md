---
title: "4. 需求模型"
date: 2021-06-14T10:54:46+10:00
draft: false
weight: 40
---

需求反映了生产中的现实，因为它基于集群和数据存储中资源的实际需求。它默认启用，无需任何配置，无法禁用。

需求大于消耗您容量的活动负载。活动负载是可见的需求，您可以使用利用率指标对其进行监控。有不可见的需求，因为它目前没有使用。

使用 vRealize Operations 中的分配模型和缓冲区设置来满足这种无形的需求。请注意，缓冲区在可用性之后应用。

#### 突然的需求

这可能会在共享环境中造成严重破坏。一组要求很高的 VM 可以共同影响集群或数据存储的整体性能。这方面的一个例子是年度销售或股市崩盘。在这种情况下，容量团队应设置适当的过载比率并通过分配驱动，因为大部分时间需求较低。

#### 潜在需求

许多关键虚拟机都受到灾难恢复的保护。在 DR 演习或实际灾难期间，此负载将“唤醒”并消耗掉。您应该将 Site Recovery Manager 计划纳入您的能力范围。

#### 潜在需求

许多新配置的 VM 需要时间来满足其全部预期需求。数据库达到最大规模，用户群达到目标，功能完成需要时间。新配置的 VM 往往处于空闲状态（可能是几个月）并且可能会突然增长。当这种情况发生时，将导致需求增加。

#### 未满足的需求

它分为两部分：VM 内部和 VM 外部。

如果 VM 过小，未满足的需求将不会对底层基础架构可见。除非这是有意为之，否则在集群容量监控中包含小型虚拟机是明智之举。

未满足需求的可见部分成为 IaaS KPI 和 SLA 的一部分，在性能管理章节中进行了介绍。

------

在容量背景下计算需求时还有另外两个考虑因素。

- 资源预留
- 资源限制

尚未消耗的预留会影响容量，但不会影响性能。使用餐厅类比，如果您的所有餐桌都已预订，但只有 20% 出现，则剩余容量为 0，但可以轻松为所有客户提供服务，实际需求仅为 20%。

CPU 和内存的行为不同，因为当预留持有者不使用 CPU 预留时，它不会生效。

需要考虑限制，因为需求不能超过强制限制。好的部分是需求计数器已经考虑到了这一点。
