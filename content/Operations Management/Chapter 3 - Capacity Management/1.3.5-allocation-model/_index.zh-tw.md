---
title: "5. 分配模型"
date: 2021-06-14T10:57:22+10:00
draft: false
weight: 50
---

默認情況下，分配模型是 ***不*** 啟用的，因為過量使用率因客戶而異。您應該適當地配置它以考慮與該集群相關的所有類型的需求。通過使用兩者，您可以考慮兩種輸入（真實需求和非真實需求）。

分配的下一個用例是演示文稿和報告。通常有一些限制，例如合同義務或 SLA，要求容量不超過商定的比率。請注意，這些限制通常是非技術性的。

一些客戶喜歡根據過度使用來計劃購買。確定適當的過度使用率，這是用於預測未來利用率的一個因素。過度使用率旨在提供對利用率的粗略估計。例如，4:1 的 CPU 過量使用率意味著平均每個 vCPU 只會以 25% 的利用率運行。

分配模型有 3 個主要限制：

#### 虛擬機大小

過量使用比率中不考慮 VM 大小。它假設調度兩個巨大的虛擬機就像調度許多小型虛擬機一樣簡單。與幾個大型虛擬機相比，ESXi 調度程序可以處理更多的小型虛擬機，尤其是當它們在不同時間達到峰值時。

#### 過度配置的虛擬機

過度配置 VM 的問題很常見，尤其是在大型 VM 中。在生產環境中很難解決這個問題，因為它涉及停機時間，你有責任證明它不會影響性能。從政治上講，這可能會使確定 VM 大小並證明成本合理的團隊看起來很糟糕。最好的方法是首先通過使用累進定價來預防問題。這在本書的 [定價](/zh-tw/operations-management/chapter-5-cost-management/1.5.2-price/) 部分進行了描述。

#### IaaS 工作負載

不考慮不採用 VM 形式的 IaaS 工作負載。 VMkernel、vSAN、NSX、vSphere Replication 和 vMotion 都需要考慮。另一方面，包含代理虛擬機是因為它採用虛擬機的形式，儘管它傾向於使用本地數據存儲。